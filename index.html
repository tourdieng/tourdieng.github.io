<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Cek Harga Paket Wisata Dieng Otomatis | Putratour.id</title>
  <meta name="description" content="Cek harga otomatis paket wisata Dieng dari berbagai kota, durasi, dan peserta. Sistem interaktif, info real-time, lengkap fasilitas, destinasi, & booking mudah. Powered by Putratour.id.">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <style>
/* ========== CSS TIDAK ADA YANG DIUBAH ========== */
:root {
  --brand: #6a1b9a;
  --primary: #1976d2;
  --accent: #ffb300;
  --bg: #f5f7fa;
  --card: #fff;
  --text: #1a2740;
  --radius: 1.7rem;
  --shadow: 0 6px 32px #19335a13;
  --shadow-lg: 0 10px 40px #6a1b9a24;
  --fasil: #e3f2fd;
  --dest: #fff8e1;
}
[data-theme=dark] {
  --brand: #39215b;
  --primary: #82b1ff;
  --accent: #ffd54f;
  --bg: #1a202c;
  --card: #232838;
  --text: #e5e8f2;
  --shadow: 0 6px 32px #0004;
  --shadow-lg: 0 10px 40px #22104444;
  --fasil: #25374a;
  --dest: #312a1a;
}
html, body {
  margin: 0;
  padding: 0;
  font-family: 'Segoe UI', 'Montserrat', Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  transition: background .3s, color .3s;
}
header {
  background: var(--brand);
  color: #fff;
  box-shadow: var(--shadow);
  padding: 1rem 0;
  position: sticky;
  top: 0;
  z-index: 11;
}
.header-wrap {
  max-width: 900px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 0 18px;
  justify-content: space-between;
}
.brand-logo {
  width: 36px;
  height: 36px;
  background: #fff2;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.brand-logo svg {
  width: 27px;
  height: 27px;
}
.brand-title {
  font-size: 1.27rem;
  font-weight: 800;
  letter-spacing: 0.03em;
}
.dark-toggle, .mute-btn {
  border: none;
  background: transparent;
  color: #fff;
  cursor: pointer;
  font-size: 1.1rem;
  margin-left: 6px;
}
.desc {
  text-align: center;
  max-width: 670px;
  margin: 0 auto 18px;
  color: #294;
  font-size: 1.13rem;
}
.program-desc {
  margin: 0 auto 26px auto;
  max-width: 600px;
  background: #fffbeb;
  border: 1px solid #ffe082;
  border-radius: 1.1rem;
  padding: 18px 22px 12px 22px;
  color: #5b3b07;
  font-size: 1.06rem;
  box-shadow: 0 2px 14px #ffd6000b;
}
.stepper {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin: 30px 0 36px 0;
}
.step {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 0.98rem;
  font-weight: 700;
}
.step-circle {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: #bdbdbd;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 6px;
  font-size: 1.12rem;
  font-weight: bold;
  transition: background .22s;
}
.step.active .step-circle {
  background: var(--primary);
}
.step.complete .step-circle {
  background: #43a047;
}
.step-label {
  color: #939ca9;
  transition: color .2s;
}
.step.active .step-label, .step.complete .step-label {
  color: var(--primary);
}
.step.complete .step-label {
  color: #43a047;
}
.card {
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-lg);
  padding: 34px 28px 38px 28px;
  margin-bottom: 40px;
  max-width: 500px;
  margin-left: auto;
  margin-right: auto;
  transition: box-shadow .2s, background .3s;
  position: relative;
  overflow: hidden;
  min-height: 230px;
  animation: fadein .5s;
}
@keyframes fadein { from{opacity:0; transform:translateY(28px);} to{opacity:1; transform:translateY(0);} }
.card-slide { animation: slidein .45s;}
@keyframes slidein { from{opacity:0; transform:translateX(40px);} to{opacity:1; transform:translateX(0);} }
.form-group { margin-bottom: 22px; }
label { font-weight: 700; margin-bottom: 8px; display: block; }
select, input[type="number"], input[type="date"] {
  width: 100%;
  border: 1.3px solid #d0d5e3;
  border-radius: 1.2rem;
  padding: 12px 16px;
  font-size: 1.06rem;
  background: #fafdff;
  font-family: inherit;
  outline: none;
  box-sizing: border-box;
  margin-bottom: 3px;
  color: var(--text);
  transition: border .15s, background .2s;
}
[data-theme=dark] select,
[data-theme=dark] input[type="number"],
[data-theme=dark] input[type="date"] {
  background: #282c36;
  color: var(--text);
  border-color: #393cae;
}
select:focus, input:focus { border: 1.7px solid var(--primary);}
.error { color: #e05747; font-size: 0.99rem; margin: 3px 0 0 1px;}
.btn-main {
  background: var(--brand);
  color: #fff;
  border: none;
  padding: 16px 32px;
  border-radius: 1.5rem;
  font-weight: 800;
  font-size: 1.11rem;
  cursor: pointer;
  transition: background .18s, transform .12s;
  box-shadow: 0 2px 16px #6a1b9a13;
  margin-top: 18px;
  display: block;
  width: 100%;
}
.btn-main[disabled] { opacity:0.7; cursor: not-allowed;}
.btn-main:hover, .btn-main:focus {
  background: var(--primary);
  transform: translateY(-2px) scale(1.04);
}
/* ========== TOMBOL BACK BARU ========== */
.back-btn-wrap {
  display: flex;
  width: 100%;
  justify-content: flex-start;
  margin-bottom: 25px !important;
}
.back-btn {
  background: #f4f5fa;
  border: 1.8px solid #d7dbe6;
  color: #223;
  font-size: 1.14rem;
  font-weight: bold;
  cursor: pointer;
  z-index:2;
  opacity:1;
  padding: 11px 32px 11px 19px;
  border-radius: 2.5em;
  display: flex;
  align-items: center;
  box-shadow: 0 2px 12px #19335a11;
  gap: 10px;
  transition: color .19s, background .16s, border .15s, box-shadow .13s;
  outline: none;
  min-width: 0;
}
.back-btn svg {
  display: block;
  width: 26px;
  height: 26px;
  margin-right: 7px;
}
.back-btn:active, .back-btn:focus {
  background: #e4eaf5;
  border-color: var(--primary);
  color: var(--primary);
  box-shadow: 0 4px 14px #1976d211;
}
.back-btn:hover {
  background: #eaf3ff;
  border-color: var(--brand);
  color: var(--brand);
  box-shadow: 0 4px 18px #1976d216;
}
@media (max-width:700px){
  main {
    padding-left: 10px;
    padding-right: 10px;
  }
  .kartu-grid-wrap { grid-template-columns: 1fr !important;}
  .card { padding: 18px 7px 38px 7px; margin-bottom: 44px; }
  .faq { padding: 13px 3vw 8px 3vw;}
  .wa-btn { min-width: 96vw;}
  .back-btn-wrap { margin-bottom: 48px !important; }
  .back-btn { padding: 13px 29px 13px 16px; font-size: 1.08rem; min-width: 0; }
  #qrWrap img {
    max-width: 220px;
    width: 100%;
    height: auto;
    background: #fff;
    border-radius: 1.1rem;
    box-shadow: 0 2px 12px #8882;
    padding: 10px;
    margin-bottom: 8px;
    margin-left: auto;
    margin-right: auto;
    display: block;
  }
}
/* ========== END TOMBOL BACK BARU ========== */
.hasil-harga { margin-top: 8px; padding: 22px 0 0 0; text-align: center;}
.harga-besar { font-size: 2.14rem; font-weight: 800; color: var(--brand); margin-bottom: 10px;}
.harga-break { color:#888; font-size: 1.08rem; margin-bottom:10px;}
.kartu-grid-wrap {
  display: grid;
  gap: 18px;
  grid-template-columns: 1fr 1fr;
  margin: 25px 0 12px 0;
}
.kartu-grid-col {
  background: var(--fasil);
  color: #1a2740;
  border-radius: 1.1rem;
  box-shadow:0 2px 14px #1976d215;
  padding: 17px 11px 14px 13px;
  font-size: 1.09rem;
  min-width: 0;
  animation: fadein .45s;
}
.kartu-title {
  display: flex;
  align-items: center;
  gap: 9px;
  font-weight: bold;
  font-size:1.12rem;
  margin-bottom:7px;
}
.kartu-list { margin: 0; padding: 0; list-style: none; }
.kartu-list li {
  display: flex;
  align-items: center;
  gap: 9px;
  padding: 4px 0;
  border-radius: .5rem;
  font-size: 1.07rem;
}
.dest-col { background: var(--dest);}
.fasil-icon { font-size:1.17em;}
.dest-icon { font-size:1.13em;}
.wa-share-row {
  margin-top: 32px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap:10px;
}
.wa-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(90deg,#25D366,#128C7E);
  color: #fff;
  font-weight: 800;
  font-size: 1.09rem;
  padding: 13px 24px 13px 26px;
  border-radius: 1.6rem;
  min-width: 240px;
  box-shadow: 0 2px 16px #128C7E13;
  cursor: pointer;
  text-decoration: none;
  outline: none;
  position: relative;
  z-index: 2;
  border:none;
  transition: background .16s, transform .12s;
  text-align: center;
  gap:10px;
}
.wa-btn:hover, .wa-btn:focus { background: #128C7E; transform: scale(1.04);}
.share-btn {
  background: var(--primary);
  color: #fff;
  font-weight:700;
  border:none;
  padding:9px 18px;
  border-radius:1.1rem;
  font-size:1.04rem;
  margin-top:4px;
  cursor:pointer;
  box-shadow:0 2px 16px #1976d217;
  transition: background .17s;
}
.share-btn:active { background: var(--brand);}
.loading-wrap {
  display: flex;
  flex-direction:column;
  align-items: center;
  justify-content: center;
  min-height: 230px;
  width:100%;
  animation: fadein .6s;
}
.loading-dot {
  width: 12px;
  height: 12px;
  background: var(--primary);
  border-radius: 50%;
  display: inline-block;
  margin: 0 2px;
  animation: bounce .9s infinite alternate;
}
.loading-dot:nth-child(2) { animation-delay: .15s;}
.loading-dot:nth-child(3) { animation-delay: .32s;}
@keyframes bounce { to{ transform: translateY(-9px); opacity: 0.7;} }
.loading-text {
  margin-top: 24px;
  color: var(--brand);
  font-size:1.12rem;
  font-weight:700;
  letter-spacing:0.01em;
}
.progress-bar-wrap{
  margin:30px auto 0 auto;
  width:85%;
  max-width:390px;
  height:8px;
  background:#e0e4ee;
  border-radius:8px;
  overflow:hidden;
}
.progress-bar{
  height:100%;
  background:linear-gradient(90deg,var(--primary),var(--accent));
  width:0%;
  transition:width .7s cubic-bezier(.4,1,.7,1);
}
.history-section{
  background:var(--card);
  border-radius:1.2rem;
  box-shadow:var(--shadow);
  max-width:540px;
  margin:38px auto 20px auto;
  padding:16px 13px;
}
.history-title{
  font-size:1.09rem;
  font-weight:700;
  margin-bottom:8px;
  color:var(--brand);
}
.history-list{margin:0;padding:0;list-style:none;}
.history-list li{
  margin:0 0 10px 0;
  padding:9px 12px;
  border-radius:.9rem;
  background:var(--fasil);
  font-size:.98rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.history-btn{
  background:var(--primary);
  color:#fff;
  padding:3px 13px;
  font-size:.97rem;
  border:none;
  border-radius:.8rem;
  cursor:pointer;
  margin-left:6px;
  transition:background .15s;
}
.history-btn:hover{background:var(--brand);}
#qrWrap{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  margin-top:15px;
}
#qrWrap canvas{
  background:#fff;
  border-radius:1rem;
  padding:8px;
  margin-bottom:7px;
  box-shadow:0 2px 14px #1976d210;
}
#qrWrap label{
  font-size:.98rem;
  color:#222;
  margin-bottom:2px;
}
.mute-btn{font-size:1.15em;}
.faq {
  background: var(--card);
  border-radius: .88rem;
  box-shadow: var(--shadow);
  margin: 40px auto 0 auto;
  padding: 27px 24px 16px 24px;
  width: 100%;
  max-width: 900px;
  box-sizing: border-box;
}
.faq h2 {
  margin-top:0;
  font-size: 1.09rem;
}
details {
  margin-bottom: 18px;
}
summary {
  font-weight: 700;
  font-size: 1.06rem;
  color: var(--primary);
  cursor: pointer;
}
details[open] summary { color: var(--brand);}
.faq p, .faq li { color: #264465;}
footer {
  margin-top: auto;
  background: var(--brand);
  color: #fff;
  padding: 13px 0 10px 0;
  text-align: center;
  font-size: .98rem;
  border-radius: 0.7rem 0.7rem 0 0;
}
.toast {
  position: fixed;
  bottom: 32px;
  left:50%;
  transform:translateX(-50%);
  background: var(--primary);
  color: #fff;
  border-radius:1.1rem;
  padding:12px 28px;
  font-size:1.07rem;
  box-shadow:0 8px 32px #19335a25;
  z-index:9999;
  opacity:0;
  pointer-events:none;
  transition:opacity .24s;
}
.toast.show { opacity:1; pointer-events:auto;}
  </style>
</head>
<body>
  <header>
    <div class="header-wrap">
      <div style="display:flex;align-items:center;gap:12px;">
        <span class="brand-logo">
          <svg fill="none" viewBox="0 0 40 40"><circle cx="20" cy="20" r="20" fill="#fff" fill-opacity="0.17"/><path d="M8 28L18 15L24 23L29 18L35 28H8Z" fill="#ffd600"/><circle cx="18" cy="16" r="1.5" fill="#6a1b9a"/></svg>
        </span>
        <a href="/" style="text-decoration:none;color:inherit">
          <span class="brand-title">Putratour.id</span>
        </a>
      </div>
      <div>
        <button class="dark-toggle" id="toggleDark" title="Mode gelap/terang">ðŸŒ—</button>
        <button class="mute-btn" id="muteBtn" title="Mute/unmute notifikasi suara">ðŸ”Š</button>
      </div>
    </div>
  </header>
  <main>
    <h1 style="text-align:center;font-size:2.11rem;color:var(--brand);font-weight:900;letter-spacing:-1.5px;">
      Cek Harga Paket Wisata Dieng Otomatis <span style="display:inline-block;transform:rotate(-10deg);font-size:1.5rem;">âœ¨</span>
    </h1>
    <div class="desc">
      <b>Pertama di Dieng!</b>
      Dapatkan estimasi harga <b>paket wisata Dieng</b> secara <b>otomatis & interaktif</b> tanpa harus menunggu admin.
      Pilih kota keberangkatan, durasi paket, dan jumlah peserta, sistem kami langsung menampilkan biaya terbaru, fasilitas, dan destinasi lengkap.
      <br><br>
      <b>Transparan, cepat, dan data valid setiap hari.</b> Solusi praktis untuk keluarga, rombongan, maupun kantor.
    </div>
    <div class="program-desc">
      <b>Apa itu fitur cek harga otomatis?</b><br>
      Halaman ini adalah program aplikasi web khusus dari Putratour.id yang membantu Anda cek biaya paket wisata Dieng secara mandiri dan real-time.
      Estimasi langsung, tanpa harus menunggu penawaran via chat. Cocok untuk semua jenis pemesan!
    </div>
    <!-- Stepper dan Card -->
    <div class="stepper" id="stepper">
      <div class="step active" data-step="1"><div class="step-circle">1</div><div class="step-label">Kota</div></div>
      <div class="step" data-step="2"><div class="step-circle">2</div><div class="step-label">Tanggal</div></div>
      <div class="step" data-step="3"><div class="step-circle">3</div><div class="step-label">Durasi</div></div>
      <div class="step" data-step="4"><div class="step-circle">4</div><div class="step-label">Peserta</div></div>
      <div class="step" data-step="5"><div class="step-circle">âœ“</div><div class="step-label">Hasil</div></div>
    </div>
    <div class="card" id="cardStep"></div>
    <!-- RIWAYAT CEK HARGA -->
    <div class="history-section" id="historySec" style="display:none;">
      <div class="history-title">Riwayat Cek Harga</div>
      <ul class="history-list" id="historyList"></ul>
    </div>
    <section class="faq">
      <h2>FAQ: Informasi Paket Wisata Dieng</h2>
      <details>
        <summary>Apa keunggulan sistem cek harga ini?</summary>
        <p>
          Sistem cek harga Putratour.id memberikan info <b>real & transparan</b>, update setiap saat. Anda bisa cek biaya dari berbagai kota, durasi, dan peserta tanpa perlu menunggu penawaran manual.
        </p>
      </details>
      <details>
        <summary>Harga sudah termasuk apa saja?</summary>
        <p>
          Semua harga paket <b>all in</b> termasuk transportasi, penginapan (jika menginap), makan, tiket masuk, driver, tour guide, BBM, parkir, tol, dan air mineral. Info detail fasilitas bisa dilihat di bagian atas.
        </p>
      </details>
      <details>
        <summary>Bisa pesan untuk peserta lebih dari 20 orang?</summary>
        <p>
          Untuk group besar di atas 20 orang, silakan hubungi admin Putratour.id langsung untuk penawaran khusus sesuai kebutuhan Anda.
        </p>
      </details>
      <details>
        <summary>Apakah harga bisa berubah?</summary>
        <p>
          Harga di sistem adalah update terbaru, namun bisa berubah sesuai kebijakan tempat wisata, musim liburan, atau permintaan khusus. Pastikan cek sebelum booking.
        </p>
      </details>
      <details>
        <summary>Bagaimana cara booking atau konsultasi?</summary>
        <p>
          Setelah cek harga, Anda bisa langsung konsultasi dan reservasi lewat WhatsApp admin resmi Putratour.id, atau kunjungi website utama untuk info lebih lengkap.
        </p>
      </details>
    </section>
  </main>
  <div style="text-align:center;margin:32px 0 10px 0;">
    <a href="https://www.putratour.id/paket-wisata-dieng/" target="_blank"
      style="display:inline-block;background:#6a1b9a;color:#fff;font-weight:700;padding:13px 28px;border-radius:2rem;font-size:1.12rem;text-decoration:none;box-shadow:0 2px 12px #6a1b9a22;transition:background .19s;">
      Lihat Semua Paket Wisata Dieng &gt;
    </a>
  </div>
  <footer>
    &copy; 2025 Putratour.id â€“ Cek Harga & Reservasi Paket Wisata Dieng. All rights reserved.
  </footer>
  <div class="toast" id="toast"></div>
  <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
  <script>
// Semua data, logic, dan urutan tidak diubah, hanya fix bug kecil & validasi extra
const checkSvg = `<svg width="17" height="17" viewBox="0 0 17 17" fill="none" style="display:inline;vertical-align:middle;" xmlns="http://www.w3.org/2000/svg"><circle cx="8.5" cy="8.5" r="8.5" fill="#f0f9f5"/><path d="M5 9.2l2.1 2.1 4.2-4.6" stroke="#219a56" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
const kotaList = [
  { value:"jogja", label:"Jogja" },{ value:"wonosobo", label:"Wonosobo" },{ value:"purwokerto", label:"Purwokerto" },{ value:"semarang", label:"Semarang" },{ value:"solo", label:"Solo" },{ value:"dieng", label:"Dieng" },{ value:"banjarnegara", label:"Banjarnegara" },{ value:"magelang", label:"Magelang" },{ value:"salatiga", label:"Salatiga" },{ value:"kebumen", label:"Kebumen" },{ value:"cilacap", label:"Cilacap" },{ value:"pekalongan", label:"Pekalongan" }
];
const hargaData = {/* ...data harga asli... */1: { jogja: [2500000,1250000,900000,800000,750000,725000,950000,900000,850000,750000], wonosobo: [1550000,775000,750000,575000,550000,525000,675000,650000,600000,550000], purwokerto: [2500000,1250000,900000,800000,750000,725000,950000,900000,850000,750000], semarang: [2700000,1350000,950000,850000,800000,750000,975000,925000,875000,775000], solo: [2700000,1350000,950000,850000,800000,750000,975000,925000,875000,775000], dieng: [1550000,775000,750000,575000,550000,525000,675000,650000,600000,550000], banjarnegara: [1550000,775000,750000,575000,550000,525000,675000,650000,600000,550000], magelang: [2500000,1250000,900000,800000,750000,725000,950000,900000,850000,750000], salatiga: [2500000,1250000,900000,800000,750000,725000,950000,900000,850000,750000], kebumen: [2500000,1250000,900000,800000,750000,725000,950000,900000,850000,750000], cilacap: [2700000,1350000,950000,850000,800000,750000,975000,925000,875000,775000], pekalongan: [2700000,1350000,950000,850000,800000,750000,975000,925000,875000,775000] },2: { jogja: [4500000,2250000,1550000,1250000,1225000,1200000,1550000,1500000,1450000,1350000], wonosobo: [4200000,2100000,1500000,1150000,1100000,1050000,1275000,1250000,1250000,1250000], purwokerto: [4500000,2250000,1550000,1250000,1225000,1200000,1550000,1500000,1450000,1350000], semarang: [4700000,2350000,1650000,1350000,1300000,1250000,1600000,1550000,1500000,1375000], solo: [4700000,2350000,1650000,1350000,1300000,1250000,1600000,1550000,1500000,1375000], dieng: [4200000,2100000,1500000,1150000,1100000,1050000,1275000,1250000,1250000,1250000], banjarnegara: [4200000,2100000,1500000,1150000,1100000,1050000,1275000,1250000,1250000,1250000], magelang: [4500000,2250000,1550000,1250000,1225000,1200000,1550000,1500000,1450000,1350000], salatiga: [4500000,2250000,1550000,1250000,1225000,1200000,1550000,1500000,1450000,1350000], kebumen: [4500000,2250000,1550000,1250000,1225000,1200000,1550000,1500000,1450000,1350000], cilacap: [4700000,2350000,1650000,1350000,1300000,1250000,1600000,1550000,1500000,1375000], pekalongan: [4700000,2350000,1650000,1350000,1300000,1250000,1600000,1550000,1500000,1375000] },3: { jogja: [6500000,3250000,2450000,1900000,1850000,1800000,1950000,1900000,1850000,1800000], wonosobo: [6300000,3150000,2450000,1850000,1800000,1750000,1900000,1875000,1850000,1800000], purwokerto: [6500000,3250000,2450000,1900000,1850000,1800000,1950000,1900000,1850000,1800000], semarang: [6700000,3350000,2550000,1950000,1900000,1850000,1975000,1950000,1900000,1850000], solo: [6700000,3350000,2550000,1950000,1900000,1850000,1975000,1950000,1900000,1850000], dieng: [6300000,3150000,2450000,1850000,1800000,1750000,1900000,1875000,1850000,1800000], banjarnegara: [6300000,3150000,2450000,1850000,1800000,1750000,1900000,1875000,1850000,1800000], magelang: [6500000,3250000,2450000,1900000,1850000,1800000,1950000,1900000,1850000,1800000], salatiga: [6500000,3250000,2450000,1900000,1850000,1800000,1950000,1900000,1850000,1800000], kebumen: [6500000,3250000,2450000,1900000,1850000,1800000,1950000,1900000,1850000,1800000], cilacap: [6700000,3350000,2550000,1950000,1900000,1850000,1975000,1950000,1900000,1850000], pekalongan: [6700000,3350000,2550000,1950000,1900000,1850000,1975000,1950000,1900000,1850000] }};
const fasilitasData = {
  1: ['Kendaraan', 'Layanan makan 2x', 'Tiket masuk destinasi wisata', 'Driver', 'Tour guide', 'BBM', 'Parkir', 'Tol', 'Air mineral'],
  2: ['Kendaraan', 'Penginapan 1 malam', 'Layanan makan 4x', 'Tiket masuk destinasi wisata', 'Driver', 'Tour guide', 'BBM', 'Parkir', 'Tol', 'Air mineral'],
  3: ['Kendaraan', 'Penginapan 2 malam', 'Layanan makan 7x', 'Tiket masuk destinasi wisata', 'Driver', 'Tour guide', 'BBM', 'Parkir', 'Tol', 'Air mineral']
};
const destinasiData = {
  1: ['Bukit Sikunir', 'Telaga Cebong', 'Kawah Sikidang', 'Komplek Candi Arjuna', 'Batu Ratapan Angin', 'Dieng Plateau Theater', 'Taman Pintu Langit', 'Sentra Oleh-oleh dan Kuliner Khas'],
  2: ['Bukit Sikunir', 'Telaga Cebong', 'Kawah Sikidang', 'Komplek Candi Arjuna', 'Batu Ratapan Angin', 'Dieng Plateau Theater', 'Taman Pintu Langit', 'Telaga Menjer', 'Perkebunan Teh', 'Sentra Oleh-oleh dan Kuliner'],
  3: ['Bukit Sikunir', 'Telaga Cebong', 'Kawah Sikidang', 'Komplek Candi Arjuna', 'Batu Ratapan Angin', 'Dieng Plateau Theater', 'Taman Pintu Langit', 'Pemandian Air Panas Dieng', 'Kahyangan Skyline', 'Dieng Park', 'Bukit Scooter', 'Air Terjun Sikarim', 'Telaga Menjer', 'Perkebunan Teh', 'Sentra Oleh-oleh dan Kuliner']
};
let step = 1;
let dataForm = { kota:"", tanggal:"", durasi:"", peserta:"" };
let mute = false;
let history = [];
let loadingPercent = 0;
let loadingInterval;
function setStepper(n){
  const stepElems = document.querySelectorAll('.step');
  stepElems.forEach((el,i)=>{
    el.classList.toggle('active',i===(n-1));
    el.classList.toggle('complete',i<(n-1));
  });
}
function ucwords(str){ return (str+'').replace(/_/g, ' ').replace(/(^|\s)\S/g, l => l.toUpperCase()); }
function renderStep(){
  setStepper(step);
  let el = document.getElementById('cardStep');
  el.classList.remove('card-slide'); void el.offsetWidth;
  setTimeout(()=>el.classList.add('card-slide'), 15);
  const svgBack = `<svg viewBox="0 0 32 32" fill="none"><path d="M21 27L10 16L21 5" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
  if(step===1){
    el.innerHTML = `
      <div style="height:24px"></div>
      <div class="form-group">
        <label for="inpKota">Kota Keberangkatan</label>
        <select id="inpKota" required>
          <option value="">Pilih Kota...</option>
          ${kotaList.map(x=>`<option value="${x.value}"${dataForm.kota===x.value?' selected':''}>${x.label}</option>`).join('')}
        </select>
        <div id="errKota" class="error"></div>
      </div>
      <button class="btn-main" onclick="nextStepKota()">Lanjutkan</button>
    `;
    document.getElementById('inpKota').focus();
  } else if(step===2){
    el.innerHTML = `
      <div class="back-btn-wrap">
        <button class="back-btn" onclick="prevStep()">
          ${svgBack}<span>Kembali</span>
        </button>
      </div>
      <div class="form-group">
        <label for="inpTanggal">Pilih Tanggal Keberangkatan</label>
        <input type="date" id="inpTanggal" value="${dataForm.tanggal||(new Date()).toISOString().split('T')[0]}" min="${(new Date()).toISOString().split('T')[0]}" required>
        <div id="errTanggal" class="error"></div>
      </div>
      <button class="btn-main" onclick="nextStepTanggal()">Lanjutkan</button>
    `;
    document.getElementById('inpTanggal').focus();
  } else if(step===3){
    el.innerHTML = `
      <div class="back-btn-wrap">
        <button class="back-btn" onclick="prevStep()">
          ${svgBack}<span>Kembali</span>
        </button>
      </div>
      <div class="form-group">
        <label for="inpDurasi">Durasi Paket</label>
        <select id="inpDurasi" required>
          <option value="">Pilih Durasi...</option>
          <option value="1"${dataForm.durasi=="1"?' selected':''}>1 Hari</option>
          <option value="2"${dataForm.durasi=="2"?' selected':''}>2 Hari 1 Malam</option>
          <option value="3"${dataForm.durasi=="3"?' selected':''}>3 Hari 2 Malam</option>
        </select>
        <div id="errDurasi" class="error"></div>
      </div>
      <button class="btn-main" onclick="nextStepDurasi()">Lanjutkan</button>
    `;
    document.getElementById('inpDurasi').focus();
  } else if(step===4){
    el.innerHTML = `
      <div class="back-btn-wrap">
        <button class="back-btn" onclick="prevStep()">
          ${svgBack}<span>Kembali</span>
        </button>
      </div>
      <div class="form-group">
        <label for="inpPeserta">Jumlah Peserta (2â€“20)</label>
        <input type="number" id="inpPeserta" min="2" max="20" placeholder="2 â€“ 20" value="${dataForm.peserta||''}" required>
        <div id="errPeserta" class="error"></div>
      </div>
      <button class="btn-main" onclick="showLoading()">Lihat Hasil</button>
    `;
    document.getElementById('inpPeserta').focus();
  } else if(step===5){
    let kota = dataForm.kota, durasi = dataForm.durasi, peserta = parseInt(dataForm.peserta), tanggal = dataForm.tanggal;
    let hargaArray = hargaData[durasi] && hargaData[durasi][kota];
    let idx = peserta-2;
    if(idx<0) idx=0; if(idx>hargaArray.length-1) idx=hargaArray.length-1;
    let harga = hargaArray ? hargaArray[idx] : 0;
    let hargaTotal = harga*peserta;
    let fasilitas = fasilitasData[durasi]||[];
    let destinasi = destinasiData[durasi]||[];
    let groupWarn = peserta>11?`<div style="color:#e57c23;font-size:.98rem;margin-top:4px;">Harga estimasi untuk ${peserta} orang, <b>hubungi admin</b> untuk group besar!</div>`:'';
    let fasilitasKartu = `
      <div class="kartu-grid-col" style="background:var(--fasil);">
        <div class="kartu-title"><span class="fasil-icon">${checkSvg}</span> Fasilitas</div>
        <ul class="kartu-list">
          ${fasilitas.map((f,i)=>`<li><span class="fasil-icon">${checkSvg}</span> ${f}</li>`).join('')}
        </ul>
      </div>
    `;
    let destinasiKartu = `
      <div class="kartu-grid-col dest-col">
        <div class="kartu-title"><span class="dest-icon">${checkSvg}</span> Destinasi</div>
        <ul class="kartu-list">
          ${destinasi.map((d,i)=>`<li><span class="dest-icon">${checkSvg}</span> ${d}</li>`).join('')}
        </ul>
      </div>
    `;
    el.innerHTML = `
      <div class="back-btn-wrap">
        <button class="back-btn" onclick="resetForm()">
          ${svgBack}<span>Kembali ke Awal</span>
        </button>
      </div>
      <div class="hasil-harga">
        <div class="harga-besar">Rp${harga.toLocaleString('id-ID')}/orang</div>
        <div class="harga-break">Total untuk ${peserta} orang: <b>Rp${hargaTotal.toLocaleString('id-ID')}</b></div>
        <div style="margin-bottom:6px;">
          <span style="background:var(--primary);color:#fff;padding:3px 10px 3px 8px;border-radius:.8rem;font-size:.97rem;">
            ${ucwords(kota)}, ${tanggal ? new Date(tanggal).toLocaleDateString('id-ID',{day:"numeric",month:"short",year:"numeric"}) : '-'} | ${peserta} peserta | ${durasi=='1'?'1 Hari':durasi=='2'?'2 Hari 1 Malam':'3 Hari 2 Malam'}
          </span>
        </div>
        <div style="margin:10px 0 0 0;font-size:1.06rem;color:#295;">
          Termasuk fasilitas, destinasi, makan, tiket masuk, tour guide. ${groupWarn}
        </div>
        <div class="kartu-grid-wrap">
          ${fasilitasKartu}
          ${destinasiKartu}
        </div>
        <div class="wa-share-row">
          <a id="waBtn" class="wa-btn" target="_blank" rel="nofollow noopener">
            <span>Pesan Sekarang via WhatsApp</span>
          </a>
          <button class="share-btn" onclick="copyResult()">Copy Detail Harga</button>
        </div>
        <div id="qrWrap"></div>
        <button class="btn-main" style="margin-top:18px;" onclick="resetForm()">Cek Harga Lainnya</button>
      </div>
    `;
    // WhatsApp & QR
    let namaKota = ucwords(kota||'');
    let namaDurasi = durasi=='1'?"1 Hari":durasi=='2'?"2 Hari 1 Malam":"3 Hari 2 Malam";
    let tglText = tanggal?new Date(tanggal).toLocaleDateString('id-ID',{day:"numeric",month:"long",year:"numeric"}):'-';
    let msg = encodeURIComponent(
      `Halo admin Putratour.id, saya mau booking paket wisata Dieng:\n- Kota keberangkatan: ${namaKota}\n- Tanggal: ${tglText}\n- Durasi: ${namaDurasi}\n- Jumlah peserta: ${peserta}\n- Estimasi harga per orang: Rp${harga.toLocaleString('id-ID')}\n- Estimasi total: Rp${(harga*peserta).toLocaleString('id-ID')}\nMohon infonya, terima kasih!`
    );
    var no = '62'+'811'+'2828'+'283';
    let waBtn = document.getElementById('waBtn');
    if (waBtn) waBtn.href = `https://wa.me/${no}?text=${msg}`;
    // QR WhatsApp
    let qrWrap = document.getElementById('qrWrap');
    qrWrap.innerHTML = '';
    if (window.qrcode) {
      let qrDiv = document.createElement('div');
      let qrUrl = `https://wa.me/${no}?text=${msg}`;
      qrDiv.innerHTML = `<label>Scan QR untuk WhatsApp</label>`;
      let qr = window.qrcode(0, 'L');
      qr.addData(qrUrl); qr.make();
      qrDiv.innerHTML += qr.createImgTag(6, 0);
      qrWrap.appendChild(qrDiv);
    }
    if(!mute) { playSound(); }
    let record = {
      kota: namaKota, tanggal: tglText, durasi: namaDurasi, peserta, harga, hargaTotal,
      t: Date.now()
    };
    history.unshift(record); if(history.length>10) history.length=10;
    localStorage.setItem('cekHargaHistory', JSON.stringify(history));
    renderHistory();
  } else if(step==="loading"){
    el.innerHTML = `
      <div class="back-btn-wrap">
        <button class="back-btn" onclick="step=4;renderStep()">
          ${svgBack}<span>Kembali</span>
        </button>
      </div>
      <div class="loading-wrap">
        <div>
          <span class="loading-dot"></span>
          <span class="loading-dot"></span>
          <span class="loading-dot"></span>
        </div>
        <div class="loading-text">Mencari harga terbaik untukmuâ€¦</div>
        <div class="progress-bar-wrap"><div class="progress-bar" id="progressBar"></div></div>
      </div>
    `;
    loadingPercent=0;
    const bar = document.getElementById('progressBar');
    clearInterval(loadingInterval);
    loadingInterval = setInterval(function(){
      loadingPercent += Math.random()*14+10;
      if(loadingPercent>=100) loadingPercent=100;
      bar.style.width = loadingPercent+'%';
    }, 260);
  }
}
function nextStepKota(){ let v = document.getElementById('inpKota').value; if(!v) { document.getElementById('errKota').textContent="Pilih kota dulu"; return;} dataForm.kota = v; step=2; renderStep();}
function nextStepTanggal(){ let v = document.getElementById('inpTanggal').value; if(!v) { document.getElementById('errTanggal').textContent="Pilih tanggal dulu"; return;} dataForm.tanggal = v; step=3; renderStep();}
function nextStepDurasi(){ let v = document.getElementById('inpDurasi').value; if(!v) { document.getElementById('errDurasi').textContent="Pilih durasi dulu"; return;} dataForm.durasi = v; step=4; renderStep();}
function showLoading(){
  let v = document.getElementById('inpPeserta').value;
  if(!v || v<2 || v>20) { document.getElementById('errPeserta').textContent="Jumlah peserta 2â€“20"; return;}
  dataForm.peserta = v;
  step="loading"; renderStep();
  setTimeout(()=>{
    clearInterval(loadingInterval);
    step=5;renderStep();
  },1700);
}
function prevStep(){ step = Math.max(1,step-1); renderStep();}
function resetForm(){ step=1; dataForm = { kota:"", tanggal:"", durasi:"", peserta:"" }; renderStep();}
function copyResult(){
  let kota = dataForm.kota, durasi = dataForm.durasi, peserta = parseInt(dataForm.peserta), tanggal = dataForm.tanggal;
  let hargaArray = hargaData[durasi] && hargaData[durasi][kota];
  let idx = peserta-2;
  if(idx<0) idx=0; if(idx>hargaArray.length-1) idx=hargaArray.length-1;
  let harga = hargaArray ? hargaArray[idx] : 0;
  let hargaTotal = harga*peserta;
  let tglText = tanggal?new Date(tanggal).toLocaleDateString('id-ID',{day:"numeric",month:"long",year:"numeric"}):'-';
  let txt = `Cek harga paket wisata Dieng:\nKota: ${ucwords(kota)}\nTanggal: ${tglText}\nDurasi: ${durasi=='1'?"1 Hari":durasi=='2'?"2 Hari 1 Malam":"3 Hari 2 Malam"}\nPeserta: ${peserta}\nHarga per orang: Rp${harga.toLocaleString('id-ID')}\nTotal: Rp${hargaTotal.toLocaleString('id-ID')}\nPutratour.id`;
  navigator.clipboard.writeText(txt).then(()=>{ showToast("Detail harga berhasil disalin!"); });
}
function showToast(txt){ let t=document.getElementById('toast'); t.textContent=txt; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),2200);}
function renderHistory(){
  let sec = document.getElementById('historySec');
  let ul = document.getElementById('historyList');
  if(!history || history.length<1){ sec.style.display="none"; return; }
  sec.style.display="block";
  ul.innerHTML = history.map((h,i)=>`<li>
    <span>
      <b>${h.kota}</b> | ${h.durasi} | ${h.peserta} org <span style="color:#5a5a;">(${h.tanggal})</span>
      <br><span style="color:var(--primary);font-weight:700">Rp${h.harga.toLocaleString('id-ID')}</span>
    </span>
    <button class="history-btn" onclick="reShow(${i})">Lihat</button>
  </li>`).join('');
}
function reShow(i){
  let h = history[i];
  if(!h) return;
  dataForm = {
    kota: kotaList.find(x=>x.label===h.kota)?.value||"",
    tanggal: h.tanggal&&h.tanggal!=="-"?new Date(h.tanggal).toISOString().split('T')[0]:"",
    durasi: h.durasi.startsWith("1")?"1":h.durasi.startsWith("2")?"2":"3",
    peserta: h.peserta
  };
  step=5; renderStep();
}
function playSound(){
  let ctx = new (window.AudioContext||window.webkitAudioContext)();
  let o = ctx.createOscillator(); let g = ctx.createGain();
  o.type="triangle"; o.frequency.value=484;
  o.connect(g); g.connect(ctx.destination);
  g.gain.value=.07; o.start();
  setTimeout(()=>{g.gain.linearRampToValueAtTime(0,ctx.currentTime+.18);o.stop(ctx.currentTime+.19);},180);
}
document.getElementById('muteBtn').onclick = function(){
  mute=!mute;
  this.textContent = mute?'ðŸ”‡':'ðŸ”Š';
  this.title = mute?"Notifikasi suara dimatikan":"Notifikasi suara aktif";
}
let dark=false;
function applyTheme(){
  document.documentElement.setAttribute('data-theme',dark?'dark':'light');
  document.getElementById('toggleDark').textContent=dark?'â˜€ï¸':'ðŸŒ—';
}
document.getElementById('toggleDark').onclick=()=>{ dark=!dark; applyTheme(); localStorage.setItem('darkDieng',dark?"1":"0"); }
if(localStorage.getItem('darkDieng')==="1") { dark=true; }
applyTheme();
try{ history = JSON.parse(localStorage.getItem('cekHargaHistory')||"[]")||[]; }catch(e){}
renderHistory();
renderStep();
document.addEventListener('keydown',function(e){
  if(e.key==="Enter"){
    let inp=document.activeElement;
    if(step===1 && inp.id==="inpKota") nextStepKota();
    else if(step===2 && inp.id==="inpTanggal") nextStepTanggal();
    else if(step===3 && inp.id==="inpDurasi") nextStepDurasi();
    else if(step===4 && inp.id==="inpPeserta") showLoading();
  }
});
  </script>
</body>
</html>
